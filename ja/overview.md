
## Application Service > API Gateway > 概要


## API Gateway概要

- 複数のバックエンドエンドポイントサービスのゲートウェイの役割を担い、APIのエンドポイントを1つに統合できるサービスです。
- API Gatewayで提供するプラグインを通して、バックエンドエンドポイントサービスの変更/配布を行わずに機能を追加できます。(HTTPS通信、認証、CORS、リクエスト/レスポンス加工など)
- ダッシュボードを通して、APIに入ったリクエスト数、平均レスポンス時間、 HTTPステータスコードグループ(2xx、5xx)別レスポンス数などの指標を確認できます。


## 主な機能

1. 柔軟なAPI設計
    - バックエンドエンドポイントサービスの変更を行わずにAPI GatewayでAPIを設計できます。
    - ツリー形式になっていて、APIを登録してAPIパスとメソッドを簡単に管理できます。
    - パス変数(Path Variable)を宣言してバックエンドエンドポイントのパス接続およびプラグイン設定で活用できます。
2. プラグイン
    - プラグインでバックエンドエンドポイントサービスの変更/配布を行わずに機能を追加できます。
    - APIのパス(Path)またはHTTPメソッド単位で柔軟にプラグインを適用できます。
3. ステージ
    - APIをステージ(段階)ごとに配布できます。
    - ステージごとにバックエンドエンドポイントサービスを設定できます。
    - ステージを利用すると、サービス、環境(Profile)別にAPIエンドポイントドメインを構成することができ、この他のさまざまな用途で活用できます。
        - (例)サービス別ステージ区分
        - 決済サービス用ステージ：kr1-api-billing.apigw.nhncloudservice.com
        - 会員サービス用ステージ：kr1-api-member.apigw.nhncloudservice.com
        - (例)環境別ステージ区分
        - アルファ環境ステージ：kr1-api-alpha.apigw.nhncloudservice.com
        - サービス環境ステージ：kr1-api.apigw.nhncloudservice.com
        
4. ダッシュボード(統計)
    - API呼び出し数、HTTPステータスコードグループ別(2xx,3xx,4xx,5xx..)レスポンス数、平均レスポンス時間(ms)の統計指標を提供します。


## API Gateway動作方式

![[図1] API Gateway動作方式](https://static.toastoven.net/prod_apigateway/v2/apigw-v2-flow.png)
1. ゲートウェイクライアントはすべてのリクエスト(Request)をAPI Gatewayへ統合リクエストします。APIゲートウェイはリクエストとマッピングするリソースを探します。
2. リクエストにプラグインを適用します。
3. リクエストをバックエンドエンドポイントへ伝達します。
4. バックエンドエンドポイントのレスポンスをAPI Gatewayが受け取ります。
5. バックエンドエンドポイントのレスポンスにプラグインを適用します。 
6. ゲートウェイクライアントへレスポンスを伝達します。 

## サービス用語 

| 用語 | 説明 |
| --- | --- |
| API Gatewayサービス |  APIリソースとステージを管理する単位です。 |
| リソース | リソースを通してフロントエンド(EndUser)とAPIゲートウェイサービス間のAPI設計を構成します。リソースはパスとHTTPメソッドで構成されます。 |
| バックエンドエンドポイント | API Gatewayで受信したリクエストを受け取るユーザーのサービスを意味します。 |
| ステージ | リソースを配布する段階です。サービスまたは環境別にAPIを配布できます。 |
| プラグイン | 認証、ACLなど、APIゲートウェイで提供する付加機能を意味します。 |
